#Generated by Kickstart Configurator
#platform=x86

#System language
lang en_US.UTF-8
#Language modules to install
langsupport en_US.UTF-8
#System keyboard
keyboard es
#System mouse
mouse
#System timezone
timezone Europe/Madrid
#Root password
rootpw --disabled
#Initial user
user investigator --fullname "investigator" --iscrypted --password $1$6QUMOGhP$8lCYr7hUx2uyIe0pMFNPS.
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use NFS server as installation
nfs --server 192.168.0.3 --dir /var/nfs/
#System bootloader configuration
bootloader --location=mbr --driveorder=sda
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
clearpart --all --initlabel --drives=sda
#Disk partitioning information
# 100MB /boot partition
part /boot --fstype ext3 --size=100 --ondisk=sda
# everything else goes to LVM
part pv.4 --size=0 --grow --ondisk=sda
volgroup VolGroup00 --pesize=32768 pv.4
# Recommended size swap fs
logvol swap --fstype swap --name=LogVol01 --vgname=VolGroup00 --recommended
# 10GB / fs
logvol / --fstype ext4 --name=LogVol00 --vgname=VolGroup00 --size=10240
# Remaining space for /home fs
logvol /home --fstype ext4 --name=LogVol02 --vgname=VolGroup00 --size=10240 --grow

#System authorization infomation
auth  --useshadow  --enablemd5 
#Network information
network --bootproto=dhcp --device=eth0
#Firewall configuration
firewall --disabled 
#Do not configure the X Window System
skipx
#Package install information
%packages
@ ubuntu-desktop
%post
apt-get update 2>> $LOG
apt-get upgrade -y 2>> $LOG
apt-get install -y vim dconf-cli 2>> $LOG
apt-get autoremove 2>> $LOG

dconf reset -f /org/gnome/terminal 2>> $LOG
apt-get remove gnome-terminal -y 2>> $LOG
apt-get install gnome-terminal -y 2>> $LOG
locale-gen --purge en_US.UTF-8 2>> $LOG
dpkg-reconfigure locales --default en_US.UTF-8 2>> $LOG
update-locale 2>> $LOG

sed -i 's/manual/dhcp/g' /etc/network/interfaces 2>> $LOG

if [ ! -f $LOG ]; then
    echo "Post install script ended successfully" > $LOG
fi
